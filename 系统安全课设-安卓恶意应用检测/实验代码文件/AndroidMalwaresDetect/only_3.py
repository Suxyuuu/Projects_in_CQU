import os
source_path = r"F:\System_security\api\good"
destnation_path = r"F:\System_security\simplify_api\good"
#只保留API的前三项，简化特征集
for apkname in os.listdir(source_path):
    API_vector = []
    API_file = open(source_path+"\\"+apkname, 'r')
    for item in API_file:
        item = item.strip('\n')
        API_vector.append(item.split(";")[0].split("$")[0])
    API_file.close()
    API = set(API_vector)
    API_vector = list(API)
    API_vector.sort()
    API_vector_2=[]
    for i in API_vector:
        try:
            API_vector_2.append(i.split("/")[0]+"/"+i.split("/")[1]+"/"+i.split("/")[2])
        except Exception as e:
            pass
    API = set(API_vector_2)
    API_vector_2 = list(API)
    API_vector_2.sort()
    test = open(destnation_path+"\\"+apkname,'w')
    for i in API_vector_2:
        test.write(i+"\n")
    test.close
